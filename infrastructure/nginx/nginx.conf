#ATTENTION!
#
#DO NOT MODIFY THIS FILE BECAUSE IT WAS GENERATED AUTOMATICALLY,
#SO ALL YOUR CHANGES WILL BE LOST THE NEXT TIME THE FILE IS GENERATED.

server {
	listen ???.???.???.???:443 ssl;
	http2 on;

	server_name n8n.dominio.com;
	server_name www.n8n.dominio.com;
	server_name ipv4.n8n.dominio.com;

	ssl_certificate             #Path Cerfificados;
	ssl_certificate_key         #Path Cerfificados;

	client_max_body_size 134217728;

	access_log "PathAccess/proxy_access_ssl_log";
	error_log "PathLogs/logs/proxy_error_log";

	root "/PathRoot/n8n.dominio.com";

	#extension performance-booster begin
	# Additional directives added by Plesk Optimization Settings
	open_file_cache max=1000 inactive=20s;
	open_file_cache_valid 30s;
	open_file_cache_min_uses 2;
	open_file_cache_errors on;
	gzip on;
	gzip_http_version 1.0;
	gzip_proxied any;
	gzip_min_length 1024;
	gzip_comp_level 2;
	gzip_types text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript application/json;

	brotli_comp_level 3;
	brotli_min_length 1024;
	# Additional directives added by Plesk Optimization Settings
	#extension performance-booster end

	#extension sslit begin

	#extension sslit end

	#extension letsencrypt begin
	location ^~ /.well-known/acme-challenge/ {
		root /var/www/vhosts/default/htdocs;

		types { }
		default_type text/plain;

		satisfy any;
		auth_basic off;
		allow all;

		location ~ ^/\.well-known/acme-challenge.*/\. {
			deny all;
		}
	}
	#extension letsencrypt end

	#extension sectigo begin
	location ^~ /.well-known/pki-validation/fileauth.txt {
		try_files $uri $uri/ =404;
	}

	location ^~ /.well-known/pki-validation/ {
		root /var/www/vhosts/default/htdocs;

		types { }
		default_type text/plain;

		satisfy any;
		auth_basic off;
		allow all;

		location ~ ^/\.well-known/pki-validation.*/\. {
			deny all;
		}
	}
	#extension sectigo end

	error_page 400 "/error_docs/bad_request.html";
	error_page 401 "/error_docs/unauthorized.html";
	error_page 403 "/error_docs/forbidden.html";
	error_page 404 "/error_docs/not_found.html";
	error_page 500 "/error_docs/internal_server_error.html";
	error_page 405 "/error_docs/method_not_allowed.html";
	error_page 406 "/error_docs/not_acceptable.html";
	error_page 407 "/error_docs/proxy_authentication_required.html";
	error_page 412 "/error_docs/precondition_failed.html";
	error_page 414 "/error_docs/request_uri_too_long.html";
	error_page 415 "/error_docs/unsupported_media_type.html";
	error_page 501 "/error_docs/not_implemented.html";
	error_page 502 "/error_docs/bad_gateway.html";
	error_page 503 "/error_docs/maintenance.html";

	location ^~ /error_docs {
		root "/PathRoot/dominio.com";
	}

	location ~ /\.ht {
		deny all;
	}

	location ~ ^/(plesk-stat|awstats-icon|webstat|webstat-ssl|ftpstat|anon_ftpstat) {
		auth_basic "Domain statistics";
		auth_basic_user_file "/PathAuth/pd/d..httpdocs@plesk-stat";
		autoindex on;

		location ~ ^/plesk-stat(.*) {
			alias /PathLocation/statistics/$1;
		}

		location ~ ^/awstats-icon(.*) {
			alias /PathLocation/icon/$1;
		}

		location ~ ^/(.*) {
			alias /PathLocation/statistics/$1;
		}
	}

	location ~ ^/~(.+?)(/.*?\.php)(/.*)?$ {
		alias /Path/web_users/$1/$2;
		fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;
		try_files $uri $fastcgi_script_name =404;
		fastcgi_param PATH_INFO $fastcgi_path_info;
		fastcgi_pass "unix:/var/www/vhosts/system/n8n.dominio.com/php-fpm.sock";
		include /etc/nginx/fastcgi.conf;

	}

	location ~ \.php(/.*)?$ {
		fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;
		try_files $uri $fastcgi_script_name =404;
		fastcgi_param PATH_INFO $fastcgi_path_info;
		fastcgi_pass "unix:/PathLocation/php-fpm.sock";
		include /PathCGI/fastcgi.conf;

	}

	index "index.html" "index.cgi" "index.pl" "index.php" "index.xhtml" "index.htm" "index.shtml";

	disable_symlinks if_not_owner "from=/PathSymlinks/dominio.com";

	add_header X-Powered-By PleskLin;

	include "/PathVhost/vhost_nginx.conf";
}

server {
	listen ???.???.???.???:80;

	server_name n8n.dominio.com;
	server_name www.n8n.dominio.com;
	server_name ipv4.n8n.dominio.com;

	client_max_body_size 134217728;

	access_log "PathAccess/proxy_access_ssl_log";
	error_log "PathLogs/logs/proxy_error_log";

	location / {
		return 301 https://$host$request_uri;
	}
}