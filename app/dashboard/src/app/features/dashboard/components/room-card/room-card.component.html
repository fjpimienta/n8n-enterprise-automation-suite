<div class="card card-sm cursor-pointer mb-2 border-0 shadow-sm" 
     [ngClass]="{
        'border-start border-4 border-success': room().status === 'available' && !room().hasIncomingToday,
        'border-start border-4 border-info': room().hasIncomingToday && room().status === 'available',
        'border-start border-4 border-danger': room().status === 'occupied'
     }"
     (click)="onSelect.emit(room())">
    
    <div class="card-body p-3">
        <div class="d-flex align-items-center justify-content-between mb-2">
            <div class="d-flex align-items-baseline">
                <h2 class="m-0 me-2 text-primary fw-bold">{{ room().room_number }}</h2>
                <span class="text-muted small fw-medium text-truncate" style="max-width: 100px;">
                    {{ room().description }}
                </span>
            </div>

            <span class="badge" [ngClass]="{
                'bg-success-lt': room().status === 'available' && !room().hasIncomingToday,
                'bg-info-lt': room().status === 'available' && room().hasIncomingToday,
                'bg-danger-lt': room().status === 'occupied',
                'bg-warning-lt': room().status === 'maintenance'
            }">
                @if (room().status === 'available' && room().hasIncomingToday) {
                    <i class="ti ti-calendar-check me-1"></i> RESERVADA
                } @else {
                    ● {{ room().status | uppercase }}
                }
            </span>
        </div>

        <div class="d-flex gap-1 mb-2">
            @if (room().cleaning_status === 'dirty') {
                <span class="badge bg-orange-lt w-100 justify-content-center">
                    <i class="ti ti-brush me-1"></i> SUCIA
                </span>
            }
            @if (room().hasIncomingToday && room().status === 'available') {
                <span class="badge bg-purple-lt w-100 justify-content-center">
                    <i class="ti ti-clock me-1"></i> LLEGADA HOY
                </span>
            }
        </div>

        @if (room().displayDate) {
        <div class="mt-2 pt-2 border-top">
            <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted extra-small uppercase fw-bold">
                    {{ room().isCheckoutDate ? 'Salida' : 'Próxima Res' }}
                </span>
                <span class="badge d-flex align-items-center gap-1"
                    [ngClass]="room().isCheckoutDate ? 'bg-danger-lt' : 'bg-blue-lt'">
                    <i [class]="room().isCheckoutDate ? 'ti ti-logout' : 'ti ti-calendar'"></i>
                    {{ room().displayDate | date:'dd MMM' }}
                </span>
            </div>
        </div>
        }
    </div>
</div>

<style>
    .extra-small { font-size: 0.65rem; }
    .card:hover { transform: translateY(-2px); transition: all 0.2s; }
</style>